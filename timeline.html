<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shader Timeline</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Chivo:wght@400;700&family=JetBrains+Mono:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #0b1018;
        --panel: #101a28;
        --ink: #e8f1ff;
        --muted: #9db0c8;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        color: var(--ink);
        font-family: 'Chivo', sans-serif;
        background:
          radial-gradient(circle at 15% 10%, #1c2f45 0, transparent 35%),
          radial-gradient(circle at 90% 0%, #302136 0, transparent 45%),
          var(--bg);
      }

      .wrap {
        max-width: 1900px;
        margin: 0 auto;
        padding: 1rem;
      }

      h1 {
        margin: 0 0 0.4rem;
        font-size: 1.15rem;
      }

      p {
        margin: 0 0 1rem;
        color: var(--muted);
        font-size: 0.9rem;
      }

      .toolbar {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        margin-bottom: 0.95rem;
        padding: 0.6rem 0.7rem;
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 0.55rem;
        background: rgba(10, 20, 30, 0.45);
      }

      .toolbar label {
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.76rem;
        color: var(--muted);
      }

      select {
        border: 0;
        border-radius: 0.4rem;
        padding: 0.35rem 0.5rem;
        background: #1d2d42;
        color: var(--ink);
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.76rem;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(5, minmax(280px, 1fr));
        gap: 0.8rem;
      }

      .card {
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: var(--panel);
        border-radius: 0.7rem;
        overflow: hidden;
      }

      .label {
        padding: 0.55rem 0.7rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.76rem;
      }

      iframe {
        display: block;
        width: 100%;
        aspect-ratio: 16 / 9;
        border: 0;
        background: #000;
      }

      .rationale {
        margin: 0;
        padding: 0.58rem 0.7rem 0.72rem;
        color: #bdd0e6;
        font-size: 0.78rem;
        line-height: 1.32;
        border-top: 1px solid rgba(255, 255, 255, 0.08);
      }

      .hint {
        margin-left: auto;
        color: #b7cce3;
        font-size: 0.78rem;
      }

      .hint code {
        font-family: 'JetBrains Mono', monospace;
      }

      @media (max-width: 1450px) {
        .grid {
          grid-template-columns: repeat(3, minmax(280px, 1fr));
        }
      }

      @media (max-width: 980px) {
        .grid {
          grid-template-columns: repeat(2, minmax(240px, 1fr));
        }
      }

      @media (max-width: 760px) {
        .toolbar {
          flex-wrap: wrap;
        }

        .hint {
          margin-left: 0;
          width: 100%;
        }
      }

      @media (max-width: 640px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <main class="wrap">
      <h1>Beautiful Shader Timeline (v01 â†’ v10)</h1>
      <p>All iterations run live side by side in chronological order.</p>

      <div class="toolbar">
        <label for="scaleSelect">Render Scale</label>
        <select id="scaleSelect">
          <option value="1">1.0x</option>
          <option value="1.5">1.5x</option>
          <option value="2" selected>2.0x</option>
          <option value="3">3.0x</option>
        </select>
        <span class="hint">Higher scale = higher internal resolution (heavier GPU load).</span>
      </div>

      <section class="grid" id="grid"></section>
    </main>

    <script>
      const iterations = [
        { id: 'v01', file: 'beautiful_v01.glsl', rationale: 'Started with warm/cool kaleidoscope to establish motion vocabulary and emotional color tension.' },
        { id: 'v02', file: 'beautiful_v02.glsl', rationale: 'Pushed into crisp stained-glass geometry to test clarity and radial structure.' },
        { id: 'v03', file: 'beautiful_v03.glsl', rationale: 'Pulled back toward atmospheric minimalism to test quietness and breathing room.' },
        { id: 'v04', file: 'beautiful_v04.glsl', rationale: 'Introduced layered floral orbits for expressive rhythm and lyrical movement.' },
        { id: 'v05', file: 'beautiful_v05.glsl', rationale: 'Explored nocturne simplicity (moon + reflection) to benchmark restraint.' },
        { id: 'v06', file: 'beautiful_v06.glsl', rationale: 'Tested sparse contour lines and dim glow; elegant, but ultimately too subdued.' },
        { id: 'v07', file: 'beautiful_v07.glsl', rationale: 'Raised brightness and kinetic energy with a clean spiral disc composition.' },
        { id: 'v08', file: 'beautiful_v08.glsl', rationale: 'Added strong radial instrumentation and spark accents for ceremonial drama.' },
        { id: 'v09', file: 'beautiful_v09.glsl', rationale: 'Shifted to turbulent painterly flow-fields; this unlocked the richest texture.' },
        { id: 'v10 (Final)', file: 'beautiful_v10.glsl', rationale: 'Refined v09 with cleaner focal spokes and better balance between chaos and intention.' },
      ];

      const grid = document.getElementById('grid');
      const scaleSelect = document.getElementById('scaleSelect');

      function buildSrc(file, scale) {
        return `/?embed=1&renderScale=${encodeURIComponent(scale)}&shaderFile=${encodeURIComponent(`shaders/iterations/${file}`)}`;
      }

      function renderCards(scale) {
        grid.innerHTML = '';

        for (const item of iterations) {
          const card = document.createElement('article');
          card.className = 'card';

          const label = document.createElement('div');
          label.className = 'label';
          label.textContent = item.id;

          const frame = document.createElement('iframe');
          frame.title = `Shader ${item.id}`;
          frame.src = buildSrc(item.file, scale);

          const note = document.createElement('p');
          note.className = 'rationale';
          note.textContent = item.rationale;

          card.appendChild(label);
          card.appendChild(frame);
          card.appendChild(note);
          grid.appendChild(card);
        }
      }

      const initialScale = new URLSearchParams(window.location.search).get('renderScale') || '2';
      if (['1', '1.5', '2', '3'].includes(initialScale)) {
        scaleSelect.value = initialScale;
      }

      scaleSelect.addEventListener('change', () => {
        renderCards(scaleSelect.value);
      });

      renderCards(scaleSelect.value);
    </script>
  </body>
</html>
